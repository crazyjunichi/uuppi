import{d as N,u as F,w,q as v,v as x,ar as $,as as q,c as o,o as n,i as m,k as g,x as A,F as f,g as j,b as W,z as T,t as u,a as i,y as B,e,h as s,aN as z}from"./BZioxkpp.js";import{_ as G}from"./-X5Js3vK.js";import{_ as k}from"./B9urnu4C.js";import{_ as H}from"./CxnKh15e.js";import{_ as Q}from"./IFRYaMKP.js";import{_ as K}from"./CyiGnzmX.js";import"./ZanTZPcD.js";import{_ as U}from"./BU44zAOI.js";import{a as X,s as Y}from"./DulP5Dh6.js";import{s as J,a as Z}from"./_oJtwZBl.js";import{_ as ee}from"./BheWnx7M.js";import{T as S}from"./DQGi937s.js";import"./C-iJTia-.js";import"./p6NS2AOw.js";import"./CaY2nQe0.js";import"./CCV5qg0w.js";import"./C6WEYdB4.js";import"./BBRyHoPz.js";import"./DNW5iYFI.js";import"./BIEcodB8.js";import"./zEl0DDep.js";import"./8rramMJ-.js";import"./D_qFwxji.js";import"./DZ_ZW0-L.js";import"./jL2K3B4b.js";import"./CqkleIqs.js";import"./D2BQZiOz.js";import"./ruLjuZjz.js";import"./BY3Wrf6N.js";import"./D7pHq3BR.js";import"./DALfP9TZ.js";import"./Db7M7PmE.js";import"./C6YaAyJ4.js";import"./_lq34Ev6.js";import"./DDrlUugt.js";const te={class:"flex justify-between"},re=N({__name:"CardTable",props:{id:{},height:{}},async setup(M){let V,I;F();const h=M,{name:b,list:c}=([V,I]=w(()=>ee(Object.assign({"../../generated/AgentTag_WolfLonePrey.json":()=>e(()=>import("./CblRQgN9.js"),[],import.meta.url),"../../generated/AgentTag_WolfPackPrey.json":()=>e(()=>import("./_B2EWfgR.js"),[],import.meta.url),"../../generated/CardType0.json":()=>e(()=>import("./BS66CIf5.js"),[],import.meta.url),"../../generated/CardType1.json":()=>e(()=>import("./DI7CorlD.js"),[],import.meta.url),"../../generated/CardType10.json":()=>e(()=>import("./BFVw7SQ-.js"),[],import.meta.url),"../../generated/CardType11.json":()=>e(()=>import("./BATjPjrJ.js"),[],import.meta.url),"../../generated/CardType12.json":()=>e(()=>import("./BoYIP7-u.js"),[],import.meta.url),"../../generated/CardType13.json":()=>e(()=>import("./CtGMrbOR.js"),[],import.meta.url),"../../generated/CardType2.json":()=>e(()=>import("./BNOsvJA3.js"),[],import.meta.url),"../../generated/CardType3.json":()=>e(()=>import("./DV2kbtFp.js"),[],import.meta.url),"../../generated/CardType4.json":()=>e(()=>import("./CYYHhdZH.js"),[],import.meta.url),"../../generated/CardType5.json":()=>e(()=>import("./B3VHwJ7I.js"),[],import.meta.url),"../../generated/CardType6.json":()=>e(()=>import("./C0h0RIYA.js"),[],import.meta.url),"../../generated/CardType7.json":()=>e(()=>import("./Co3rtus2.js"),[],import.meta.url),"../../generated/CardType8.json":()=>e(()=>import("./Dv69pSz5.js"),[],import.meta.url),"../../generated/CardType9.json":()=>e(()=>import("./DtsLBn7G.js"),[],import.meta.url),"../../generated/EncounterSystem.json":()=>e(()=>import("./NsIRotiU.js"),[],import.meta.url),"../../generated/EnemyList.json":()=>e(()=>import("./B9RwPFyn.js"),[],import.meta.url),"../../generated/EquipmentTag.json":()=>e(()=>import("./dunyBAJD.js"),[],import.meta.url),"../../generated/Farming.json":()=>e(()=>import("./osQ1u6xl.js"),[],import.meta.url),"../../generated/Fishing.json":()=>e(()=>import("./H9XYo_KF.js"),[],import.meta.url),"../../generated/FixCnTranslation.json":()=>e(()=>import("./CzXI2IY2.js"),[],import.meta.url),"../../generated/FlavourSystem.json":()=>e(()=>import("./CcSmyDJU.js"),[],import.meta.url),"../../generated/FlavourTag.json":()=>e(()=>import("./DZ8CzwBo.js"),[],import.meta.url),"../../generated/MagicSystem.json":()=>e(()=>import("./Bg8xdjO3.js"),[],import.meta.url),"../../generated/MapOldData.json":()=>e(()=>import("./BKX0hM-3.js"),[],import.meta.url),"../../generated/PageHistory.json":()=>e(()=>import("./D9lxb35M.js"),[],import.meta.url),"../../generated/Perk.json":()=>e(()=>import("./DzWXSu8d.js"),[],import.meta.url),"../../generated/Quest.json":()=>e(()=>import("./DGSjEhbN.js"),[],import.meta.url),"../../generated/Recipes.json":()=>e(()=>import("./BygMvCVA.js"),[],import.meta.url),"../../generated/SpiceTag.json":()=>e(()=>import("./D04bQUSy.js"),[],import.meta.url),"../../generated/Tags.json":()=>e(()=>import("./BeScg0u7.js"),[],import.meta.url),"../../generated/TestNPCTag.json":()=>e(()=>import("./Bsj2AtVC.js"),[],import.meta.url),"../../generated/Trigger.json":()=>e(()=>import("./D8bBk1_Q.js"),[],import.meta.url),"../../generated/WeaponMove.json":()=>e(()=>import("./DfT6ETbz.js"),[],import.meta.url),"../../generated/_Ammo.json":()=>e(()=>import("./C_KRIfTP.js"),[],import.meta.url),"../../generated/_Armor.json":()=>e(()=>import("./BOd4AK6-.js"),[],import.meta.url),"../../generated/_BlueprintIndex.json":()=>e(()=>import("./Z70DZpuA.js"),[],import.meta.url),"../../generated/_Coating.json":()=>e(()=>import("./-EQB4U_q.js"),[],import.meta.url),"../../generated/_Container.json":()=>e(()=>import("./CxMmUiu0.js"),[],import.meta.url),"../../generated/_Food.json":()=>e(()=>import("./BEPhy1ud.js"),[],import.meta.url),"../../generated/_NPCIndex.json":()=>e(()=>import("./DkXOrxkC.js"),[],import.meta.url),"../../generated/_Seasons.json":()=>e(()=>import("./yYhEeBFG.js"),[],import.meta.url),"../../generated/_StatIndex.json":()=>e(()=>import("./DvCWTvzu.js"),[],import.meta.url),"../../generated/_TradingValue.json":()=>e(()=>import("./DMBw8kjb.js"),[],import.meta.url),"../../generated/_Weapon.json":()=>e(()=>import("./Z34b0z-s.js"),[],import.meta.url),"../../generated/eTag_Backpack.json":()=>e(()=>import("./BSc0cggn.js"),[],import.meta.url),"../../generated/eTag_Belt.json":()=>e(()=>import("./9EoRRo7z.js"),[],import.meta.url),"../../generated/eTag_Bracers.json":()=>e(()=>import("./CCD3fW3Q.js"),[],import.meta.url),"../../generated/eTag_Finger.json":()=>e(()=>import("./q6g9W52B.js"),[],import.meta.url),"../../generated/eTag_Hands.json":()=>e(()=>import("./C2CCx6eW.js"),[],import.meta.url),"../../generated/eTag_Head.json":()=>e(()=>import("./BOHTEhOC.js"),[],import.meta.url),"../../generated/eTag_Mask.json":()=>e(()=>import("./B-06Ywyc.js"),[],import.meta.url),"../../generated/eTag_Neck.json":()=>e(()=>import("./CL1vffbp.js"),[],import.meta.url),"../../generated/eTag_OuterTorso.json":()=>e(()=>import("./DmWgmcEW.js"),[],import.meta.url),"../../generated/eTag_Pants.json":()=>e(()=>import("./DbQoJ4Yf.js"),[],import.meta.url),"../../generated/eTag_Pouch.json":()=>e(()=>import("./BZ6nAA0K.js"),[],import.meta.url),"../../generated/eTag_Shield.json":()=>e(()=>import("./BD3VJcTB.js"),[],import.meta.url),"../../generated/eTag_Shirt.json":()=>e(()=>import("./D66RbjAS.js"),[],import.meta.url),"../../generated/eTag_Shoes.json":()=>e(()=>import("./CGwpNnr9.js"),[],import.meta.url),"../../generated/eTag_ShoesOuter.json":()=>e(()=>import("./DK5PEoKr.js"),[],import.meta.url),"../../generated/eTag_Shoulder.json":()=>e(()=>import("./D3zc9RhX.js"),[],import.meta.url),"../../generated/eTag_Spirit.json":()=>e(()=>import("./DKE28UIP.js"),[],import.meta.url),"../../generated/eTag_Underwear.json":()=>e(()=>import("./B56C4d5u.js"),[],import.meta.url),"../../generated/eTag_WAbrasion.json":()=>e(()=>import("./Bm1Avurx.js"),[],import.meta.url),"../../generated/eTag_WArmFractureL.json":()=>e(()=>import("./DnrG9j37.js"),[],import.meta.url),"../../generated/eTag_WArmFractureR.json":()=>e(()=>import("./WcOeybSE.js"),[],import.meta.url),"../../generated/eTag_WArmLacerationL.json":()=>e(()=>import("./BJLYaw7y.js"),[],import.meta.url),"../../generated/eTag_WArmLacerationR.json":()=>e(()=>import("./2HsM4dVd.js"),[],import.meta.url),"../../generated/eTag_WArmSprainedL.json":()=>e(()=>import("./_End2CD3.js"),[],import.meta.url),"../../generated/eTag_WArmSprainedR.json":()=>e(()=>import("./DcfnrkGd.js"),[],import.meta.url),"../../generated/eTag_WBite.json":()=>e(()=>import("./jHYLZD5t.js"),[],import.meta.url),"../../generated/eTag_WLegFractureL.json":()=>e(()=>import("./DaYddOHt.js"),[],import.meta.url),"../../generated/eTag_WLegFractureR.json":()=>e(()=>import("./k2HUxr3f.js"),[],import.meta.url),"../../generated/eTag_WLegLacerationL.json":()=>e(()=>import("./DoGqfHtj.js"),[],import.meta.url),"../../generated/eTag_WLegLacerationR.json":()=>e(()=>import("./CZvpLMG1.js"),[],import.meta.url),"../../generated/eTag_WLegSprainedL.json":()=>e(()=>import("./Deu9nTZk.js"),[],import.meta.url),"../../generated/eTag_WLegSprainedR.json":()=>e(()=>import("./BsClB0sZ.js"),[],import.meta.url),"../../generated/eTag_WMajorWound.json":()=>e(()=>import("./DRNwkat4.js"),[],import.meta.url),"../../generated/eTag_WMinorWound.json":()=>e(()=>import("./BbfTiVP0.js"),[],import.meta.url),"../../generated/eTag_WRibFracture.json":()=>e(()=>import("./PyO2UHUn.js"),[],import.meta.url),"../../generated/eTag_WSpiritual.json":()=>e(()=>import("./DHZbqVx6.js"),[],import.meta.url),"../../generated/encounterPopup.json":()=>e(()=>import("./BjF0RxDx.js"),[],import.meta.url),"../../generated/searchData.json":()=>e(()=>import("./5C0fWPRH.js"),[],import.meta.url),"../../generated/summaryData.json":()=>e(()=>import("./Cuip6_Hg.js"),[],import.meta.url)}),`../../generated/${h.id}.json`,4)),V=await V,I(),V).default,L=q,R=v({global:{value:null,matchMode:x.CONTAINS}});function _(){return c.map(t=>{let d={};return d.obj=t.obj,t.columns.forEach(a=>{d[a.id]=a.value}),d.link=t.obj,d})}return v(c.map(t=>{let d={};return d.obj=t.obj,t.columns.forEach(a=>{d[a.id]=a.value}),d})),[...c[0].columns.map(t=>{let d=t.sortable?({column:a})=>{const E=a.getIsSorted();return $(L,{color:"neutral",variant:"ghost",label:t.title,icon:E?E==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc")})}:t.title;return{accessorKey:t.id,header:d,cell:({row:a})=>a.getValue(t.id)}})],v(c[0].columns.filter(t=>t.sortable).map(t=>({id:t.id,desc:!0}))),(t,d)=>{var r;const a=Z,E=B,P=J,D=Y,C=U,y=X;return n(),o("div",null,[m(y,{value:_(),scrollable:"","scroll-height":t.height??"60vh",filters:g(R),globalFilterFields:["link.text",...(r=g(c)[0])==null?void 0:r.columns.map(l=>l.id)],size:"small"},{header:A(()=>[i("div",te,[i("div",null,[m(P,null,{default:A(()=>[m(a,null,{default:A(()=>d[1]||(d[1]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),m(E,{modelValue:g(R).global.value,"onUpdate:modelValue":d[0]||(d[0]=l=>g(R).global.value=l),placeholder:t.$t("查找")},null,8,["modelValue","placeholder"])]),_:1})])])]),default:A(()=>{var l;return[m(D,{field:"link",header:t.$t("名称")},{body:A(p=>[m(k,{obj:p.data.link},null,8,["obj"])]),_:1},8,["header"]),(n(!0),o(f,null,j((l=g(c)[0])==null?void 0:l.columns,p=>(n(),W(D,{field:p.sortKey||p.id,header:t.$t(p.title),sortable:p.sortable},{body:A(O=>[typeof O.data[p.id]=="object"?(n(),W(C,{key:0,obj:O.data[p.id]},null,8,["obj"])):(n(),o(f,{key:1},[T(u(O.data[p.id]),1)],64))]),_:2},1032,["field","header","sortable"]))),256))]}),_:1},8,["value","scroll-height","filters","globalFilterFields"])])}}}),ne=Object.assign(re,{__name:"CardTable"}),oe={key:0},ie={class:"flex flex-wrap gap-4"},_e={class:"flex flex-wrap gap-4"},ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ue={key:0},de={class:"table-auto w-full"},le={class:"bg-current/20"},se={class:"p-2"},me={class:"p-2"},pe={class:"p-2"},ge={class:"p-2"},Ee={class:"divide-y divide-gray-200/50"},Te={class:"text-center p-2"},fe={class:"text-center"},ce={class:"text-center"},je={key:0,class:"text-center text-xs"},Ve={class:"w-full lg:w-2/3"},Pe={key:0},De={key:0},he={class:"flex"},Le={class:"text-durability"},Ae={key:0,class:"text-hint"},Ie={key:1,class:"text-hint"},Re={key:2,class:"text-hint"},ye={class:"mt-2"},Oe={key:0},be={key:0,class:"flex"},Ce={key:0},ve={key:1},Se={key:2},ke={key:0},Me={key:1},$e={key:3},We={key:4},Ne={key:0},we={key:1},Fe={class:"text-durability"},Dt=N({__name:"Trader",async setup(M){let V,I;const h=([V,I]=w(()=>e(()=>import("./kD7GgtTT.js"),[],import.meta.url)),V=await V,I(),V).default,b={Spring:"春季",Summer:"夏季",Autumn:"秋季",Winter:"冬季"};let c=[],L=[];function R(){let _="Env_SpiritWorld";return h.AgentActions.forEach(t=>{if(t.MoveToEnvironment){let d=t.Conditions.RequiredStatValues.find(E=>E.Stat.key.startsWith("SeasonCounter_")),a=t.Conditions.RequiredStatValues.find(E=>E.Stat.key=="Counter");if(d){let E=d.Stat.key.replace("SeasonCounter_","");b[E]&&_!==t.MoveToEnvironment.key&&(c.push({season:b[E],days:Math.floor(d.TriggerRange.x/96),place:t.MoveToEnvironment,reqCounter:a?Math.floor(a.TriggerRange.x/96):void 0}),_=t.MoveToEnvironment.key)}}t.DroppedCards.length>0&&t.DroppedCards.forEach(d=>{d.DroppedCards.forEach(a=>{if(a.DroppedCard){let E=a.DropChance.Active&&a.DropChance.NPCStatsModifiers.length>0,P=L.find(D=>D.card.key==a.DroppedCard.key&&D.needRequest==E);P?(P.amount.m_X=Math.min(P.amount.m_X,a.Quantity.m_X),P.amount.m_Y=Math.min(P.amount.m_Y,a.Quantity.m_Y)):L.push({card:a.DroppedCard,amount:a.Quantity,needRequest:E})}})})}),c}return R(),(_,t)=>{var y;const d=G,a=k,E=H,P=Q,D=K,C=ne;return n(),o("div",null,[i("h1",null,u(_.$t("交易系统")),1),i("div",null,[i("h2",null,u(_.$t("商人")),1),_.$i18n.locale=="zh"?(n(),o("p",oe,t[0]||(t[0]=[T(" 交易系统是游戏中的一个重要功能，玩家可以通过与商人进行交易来获取各种物品和资源。"),i("br",null,null,-1),T(" 商人定期到来，会携带一些物品。当你取得了他的信任后，可以向他请求更多物品。他会在下次到来时携带。"),i("br",null,null,-1),T(" 交易的形式是以物易物，玩家给出一些物品，并可以从商人处获得不超过其价值的物品。"),i("br",null,null,-1)]))):s("",!0),i("h3",null,u(_.$t("默认携带"))+"：",1),i("div",ie,[(n(!0),o(f,null,j(g(L).filter(r=>!r.needRequest),r=>(n(),o("div",null,[m(d,{card:r.card,amount:r.amount},null,8,["card","amount"])]))),256))]),i("h3",null,u(_.$t("请求后携带"))+"：",1),i("div",_e,[(n(!0),o(f,null,j(g(L).filter(r=>!!r.needRequest),r=>(n(),o("div",null,[m(d,{card:r.card,amount:r.amount},null,8,["card","amount"])]))),256))])]),i("div",null,[i("h2",null,u(_.$t("出现时间")),1),i("div",ae,[i("div",null,[_.$i18n.locale=="zh"?(n(),o("div",ue)):s("",!0),i("div",null,[i("table",de,[i("thead",le,[i("tr",null,[i("th",se,u(_.$t("季节")),1),i("th",me,u(_.$t("天数")),1),i("th",pe,u(_.$t("地点")),1),i("th",ge,u(_.$t("备注")),1)])]),i("tbody",Ee,[(n(!0),o(f,null,j(g(c),r=>(n(),o("tr",{key:r.place.key},[i("td",Te,u(_.$t(r.season)),1),i("td",fe,u(_.$t("第N天",{day:r.days})),1),i("td",ce,[m(a,{obj:r.place},null,8,["obj"])]),r.reqCounter?(n(),o("td",je,u(_.$t("第N天",{day:r.reqCounter}))+"开始",1)):s("",!0)]))),128))])])])]),i("div",Ve,[m(E,{"highlight-places":g(c).map(r=>r.place.key)},null,8,["highlight-places"])])])]),((y=g(h).Dialogs)==null?void 0:y.length)>0?(n(),o("div",Pe,[i("h2",null,u(_.$t("对话")),1),m(P,{id:g(h).Dialogs[0].Dialog.key,class:"mb-4"},null,8,["id"])])):s("",!0),i("div",null,[i("h2",null,u(_.$t("信任度")),1),_.$i18n.locale=="zh"?(n(),o("p",De,t[1]||(t[1]=[T(" 信任度是商人的一个特有状态。"),i("br",null,null,-1)]))):s("",!0),t[6]||(t[6]=z('<h3>信任度的用途</h3><ul><li>▫️ 向商人请求物品功能开启需要<span class="text-durability">信任度</span>&gt;=25</li><li>▫️ 每次向商人请求物品需要消耗一定的<span class="text-durability">信任度</span></li><li>▫️ 从NPC买入物品时，根据<span class="text-durability">信任度</span>打折。</li><li></li></ul><h3>如何增加信任度</h3>',3)),(n(!0),o(f,null,j(g(h).ModifyNPCStatsPerTradeValue,r=>{var l;return n(),o("div",he,[t[2]||(t[2]=T(" ▫️ 每次交易后 ")),i("span",Le,u((l=r.Modifier.TargetStat)==null?void 0:l[_.$i18n.locale]),1),t[3]||(t[3]=T(" 增加 ")),r.Type==g(S).MultiplyByValueDifference?(n(),o("div",Ae," 交易差额 * "+u(r.Modifier.ValueChange.x),1)):s("",!0),r.Type==g(S).MultiplyByPlayerToNPCValue?(n(),o("div",Ie," 玩家交易价值 * "+u(r.Modifier.ValueChange.x),1)):s("",!0),r.Type==g(S).MultiplyByNPCToPlayerValue?(n(),o("div",Re," NPC交易价值 * "+u(r.Modifier.ValueChange.x),1)):s("",!0)])}),256)),i("div",ye,[t[5]||(t[5]=T(" 此外，玩家的的状态会影响每次获得信任度时的加成。 ")),(n(!0),o(f,null,j(g(h).AgentStats.filter(r=>r.ModelStat.key=="AgentTrust"),r=>{var l;return n(),o("div",null,[((l=r.ModelStat)==null?void 0:l.StatScalingToModifiers.length)>0?(n(),o("div",Oe,[(n(!0),o(f,null,j(r.ModelStat.StatScalingToModifiers,(p,O)=>(n(),o("div",null,[t[4]||(t[4]=T(" ▫️ ")),m(a,{obj:p.InterpolatedValue.InputStat},null,8,["obj"]),T(u(_.$t("为"))+" ",1),m(D,{obj:p.InterpolatedValue.Value,joiner:_.$t("时倍率"),outputSign:!0},null,8,["obj","joiner"])]))),256))])):s("",!0)])}),256))])]),i("div",null,[i("h2",null,u(_.$t("交易价值")),1),i("div",null,[t[9]||(t[9]=i("div",null,"价值调整：",-1)),(n(!0),o(f,null,j(g(h).TradingModifiers,r=>(n(),o("div",null,[(n(),o("div",be,[i("div",null,[t[7]||(t[7]=T("▫️ ")),r.ForTradingDirection==0?(n(),o("span",Ce,"交易")):s("",!0),r.ForTradingDirection==1?(n(),o("span",ve,"卖给NPC")):s("",!0),r.ForTradingDirection==2?(n(),o("span",Se,"从NPC买入")):s("",!0),(n(!0),o(f,null,j(r.TargetItems,(l,p)=>(n(),o(f,null,[p>0?(n(),o("span",ke,", ")):s("",!0),l.Target?(n(),o("span",Me,[m(a,{obj:l.Target},null,8,["obj"])])):s("",!0)],64))),256)),r.TargetItems.length==0?(n(),o("span",$e," 所有物品")):s("",!0),r.GlobalStatModifiers.length==0&&r.NPCStatModifiers.length==0?(n(),o("span",We,u(_.$t("时价值"))+" "+u(r.ModifierMode==0?"+":"x")+u(r.SimpleModifier),1)):s("",!0)]),r.GlobalStatModifiers.length>0?(n(),o("div",Ne,[(n(!0),o(f,null,j(r.GlobalStatModifiers,l=>(n(),o("span",null,[m(a,{obj:l.Stat},null,8,["obj"]),T(u(_.$t("为"))+" ",1),m(D,{obj:l.Modifier,joiner:_.$t("时价值"),outputSign:!0},null,8,["obj","joiner"])]))),256))])):s("",!0),r.NPCStatModifiers.length>0?(n(),o("div",we,[(n(!0),o(f,null,j(r.NPCStatModifiers,l=>{var p;return n(),o("span",null,[t[8]||(t[8]=T(" 当")),i("span",Fe,u((p=l.Stat)==null?void 0:p[_.$i18n.locale]),1),m(D,{obj:l.Modifier,joiner:_.$t("时价值"),outputSign:!0},null,8,["obj","joiner"])])}),256))])):s("",!0)]))]))),256))]),m(C,{id:"_TradingValue",height:"50vh"})])])}}});export{Dt as default};
