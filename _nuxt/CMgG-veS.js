import{d as b,w as H,u as D,f as O,c as o,o as r,a as u,t as v,F as k,g as T,h as E,z as W,b as L,k as F,l as M,n as R,e as P}from"./BZioxkpp.js";import{_ as G}from"./-X5Js3vK.js";import{_ as U}from"./B9urnu4C.js";import{C as w}from"./CjLpTWfz.js";import"./BU44zAOI.js";import"./C-iJTia-.js";const z={class:"mt-4"},X={key:0},q={class:""},J={class:"text-current/70 text-smaller"},K={class:"grid grid-cols-1 gap-2 lg:grid-cols-2"},Q={key:0,class:"relative overflow-y-auto overflow-x-hidden break-words w-full rounded-[calc(var(--ui-radius)*2)] p-4 flex gap-2.5 text-[var(--ui-text-highlighted)] bg-[var(--ui-bg-elevated)]/50 ring ring-inset ring-[var(--ui-border-accented)]"},Y={class:"text-sm opacity-90 whitespace-pre-line w-full"},Z={key:0,class:"my-5 text-current/10"},j=["innerHTML"],x={class:"flex flex-col gap-3"},ee={class:"flex flex-wrap ml-6 gap-2"},ne={class:"flex flex-col relative rounded-lg"},ue=b({__name:"PageHistory",async setup(se){let p,y;const V=([p,y]=H(()=>P(()=>import("./5C0fWPRH.js"),[],import.meta.url)),p=await p,y(),p).default,m=D(),C=([p,y]=H(()=>P(()=>import("./D9lxb35M.js"),[],import.meta.url)),p=await p,y(),p).default;let _=[];C.histories.forEach(e=>{var f,l,t,a,c,g,i,d,I,N,A,B;if(!(e.key.includes("DEBUG")||e.key.startsWith("NOT_USED")||e.key.startsWith("HOTFIX")||e.key.startsWith("TEST_")||e.key.startsWith("Test"))){if(e.version&&e.version!="0"){let s=_.find(n=>n.version==e.version);s||(s={version:e.version,log:[],title:null,groups:[{name:"新增卡牌",links:[]},{name:"新增蓝图",links:[]},{name:"新增地点",links:[]},{name:"新增NPC",links:[]},{name:"新增事件",links:[]},{name:"新增标签",links:[],noImage:!0},{name:"新增状态",links:[]},{name:"新增招式",links:[]},{name:"新增对话",links:[]},{name:"新增调味料/涂层",links:[]},{name:"新增角色特质",links:[],noImage:!0},{name:"其他",links:[]}]},_.push(s)),e.type=="card"?e.CardType==w.Blueprint?(f=s.groups.find(n=>n.name=="新增蓝图"))==null||f.links.push(e):e.CardType==w.Event?(l=s.groups.find(n=>n.name=="新增事件"))==null||l.links.push(e):e.CardType==w.Environment||e.CardType==w.Explorable?(t=s.groups.find(n=>n.name=="新增地点"))==null||t.links.push(e):(a=s.groups.find(n=>n.name=="新增卡牌"))==null||a.links.push(e):e.type=="tag"?(c=s.groups.find(n=>n.name=="新增标签"))==null||c.links.push(e):e.type=="stat"?(g=s.groups.find(n=>n.name=="新增状态"))==null||g.links.push(e):e.type=="weaponMove"?(i=s.groups.find(n=>n.name=="新增招式"))==null||i.links.push(e):e.type=="spice"?(d=s.groups.find(n=>n.name=="新增调味料/涂层"))==null||d.links.push(e):e.type=="perk"?(I=s.groups.find(n=>n.name=="新增角色特质"))==null||I.links.push(e):e.type=="npc"?(N=s.groups.find(n=>n.name=="新增NPC"))==null||N.links.push(e):e.type=="dialog"?(A=s.groups.find(n=>n.name=="新增对话"))==null||A.links.push(e):(B=s.groups.find(n=>n.name=="其他"))==null||B.links.push(e);let h=C.updateLogs.find(n=>n.version==e.version.replace("EA_",""));h&&(s.log=h.contents,s.title=h)}_.sort((s,h)=>h.version.localeCompare(s.version))}}),console.log(_);function S(e){return e?(e=e.replaceAll("\\n",`
`),[...V].sort((l,t)=>{const a=l[m.locale.value]||"",c=t[m.locale.value]||"";return l.type==="card"&&t.type!=="card"?-1:l.type!=="card"&&t.type==="card"?1:c.length-a.length}).filter(l=>l.type!="stat").forEach(l=>{let t=l[m.locale.value];if(t=t.replace(/\s*\(.*?\)\s*/g,""),!(t=="水"||t=="布")&&t){const a=new RegExp(`(?<!<a[^>]*?>)${t}(?![^<]*?</a>)`,"g");if(a.test(e)){const c=`<a class="text-${l.type}" href="/${l.key}">${t}</a>`;e=e.replace(a,c)}}}),e):""}function $(){M({title:`${m.t("版本历史")} - ${m.t(R().$gameName)}`,htmlAttrs:{lang:m.locale.value}})}return $(),O(m.locale,$),(e,f)=>{const l=G,t=U;return r(),o("div",null,[u("h1",null,v(e.$t("版本历史")),1),(r(!0),o(k,null,T(F(_),(a,c)=>{var g;return r(),o("div",z,[c>0?(r(),o("hr",X)):E("",!0),u("h2",null,[u("span",q,v(a.version),1),f[0]||(f[0]=W()),u("span",J,v((g=a.title)==null?void 0:g[e.$i18n.locale]),1)]),u("div",K,[a.log?(r(),o("div",Q,[u("p",Y,[(r(!0),o(k,null,T(a.log.map(i=>i[e.$i18n.locale]),(i,d)=>(r(),o(k,null,[d>0?(r(),o("hr",Z)):E("",!0),u("span",{innerHTML:S(i)},null,8,j)],64))),256))])])):E("",!0),u("div",x,[(r(!0),o(k,null,T(a.groups.filter(i=>i.links.length>0),i=>(r(),o("div",null,[u("h4",null,"➕ "+v(e.$t(i.name)),1),u("div",ee,[(r(!0),o(k,null,T(i.links,d=>(r(),o("div",ne,[d.icon&&!i.noImage?(r(),L(l,{key:0,card:d,scale:1},null,8,["card"])):(r(),L(t,{key:1,obj:d},null,8,["obj"]))]))),256))])]))),256))])])])}),256))])}}});export{ue as default};
