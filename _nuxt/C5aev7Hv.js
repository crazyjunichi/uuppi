import{_ as h}from"./Dr5xrtTs.js";import{_ as k}from"./B_EVT6TO.js";import{_ as C}from"./Dj11lUZM.js";import{_ as K}from"./Bh4Thn7s.js";import{d as T,a_ as N,c as n,h as S,k as i,o as a,a as y,t,r as I,F as j,g as f,z as c,i as u,b as M,x as O}from"./BpWfJitR.js";import{T as g,t as B,a as F}from"./DNW5iYFI.js";import{D as P}from"./BIEcodB8.js";function R(l){return{1:"SpoilageTime",2:"UsageDurability",4:"FuelCapacity",8:"Progress",16:"Liquid",32:"SpecialDurability1",64:"SpecialDurability2",128:"SpecialDurability3",256:"SpecialDurability4"}[l]}function V(l,e){const p=R(l);return e[p]}function A(l){let e="在场上";return l.OnlyGivenCard&&(e="被使用时"),l.OnlyInHand&&(e="在手上"),l.NotInHand&&(e="不在手上"),l.ExcludeInventory&&(e="不在内部"),l.OnlyInInventory&&(e="在内部"),e}const E={key:0,class:"flex"},L={class:"bg-current/5 rounded-xl p-2 mr-2 w-22"},U={class:"text-xs text-center"},G={class:"text-2xl font-bold text-center"},H={class:""},w={key:0},x={class:"text-durability"},Q={key:0},W={class:"text-durability"},q=T({__name:"DropChance",props:{dropChance:{},card:{}},setup(l){const e=l,{dropChance:p,card:b}=N(e);return(r,o)=>{const D=h,m=k,_=K;return i(p).Active?(a(),n("div",E,[y("div",L,[y("div",U,t(r.$t("基础概率")),1),y("div",G,t(i(p).BaseDropChance)+"%",1)]),y("div",null,[I(r.$slots,"default"),y("div",H,[(a(!0),n(j,null,f(i(p).StatsModifiers,(s,d)=>(a(),n("div",{key:`stats-${d}`},[o[0]||(o[0]=c(" ▫️ ")),s.Value.WhenOutOfRange==0?(a(),n("span",w,t(r.$t("仅当")),1)):S("",!0),c(" "+t(r.$t("WHEN"))+" ",1),u(D,{obj:s.InputStat},null,8,["obj"]),c(t(r.$t("为"))+" ",1),u(m,{obj:s.Value,joiner:r.$t("时概率"),outputSign:!0},null,8,["obj","joiner"])]))),128)),(a(!0),n(j,null,f(i(p).DurabilitiesModifiers,(s,d)=>(a(),n("div",{key:`durability-${d}`},[c(" ▫️"+t(r.$t("自身")),1),y("span",x,t(i(V)(s.InputDurability,i(b)).CardStatName.Text),1),o[1]||(o[1]=c("为 ")),u(m,{obj:s.Value,joiner:r.$t("时概率"),outputSign:!0},null,8,["obj","joiner"])]))),128)),(a(!0),n(j,null,f(i(p).CardsModifiers,(s,d)=>(a(),n("div",{key:`card-${d}`},[o[2]||(o[2]=c(" ▫️")),u(D,{obj:s.Card.Target},null,8,["obj"]),y("span",null,t(r.$t(i(A)(s)))+" ",1),y("span",null,[c(t(r.$t("增加概率")),1),u(_,{number:s.MaxChancePerCard},null,8,["number"])]),s.MaxStack>0?(a(),n("span",Q,"("+t(r.$t("最多"))+t(s.MaxStack)+t(r.$t("次"))+")",1)):S("",!0)]))),128)),(a(!0),n(j,null,f(i(p).NPCStatsModifiers,(s,d)=>{var $;return a(),n("div",{key:`npc-${d}`,class:"text-sm text-balance"},[o[3]||(o[3]=c(" ▫️")),y("span",W,t(($=s.InputStat)==null?void 0:$[r.$i18n.locale]),1),y("span",null,t(r.$t("为")),1),u(m,{obj:s.Value,joiner:r.$t("时概率"),outputSign:!0},null,8,["obj","joiner"])])}),128))])])])):S("",!0)}}}),z=Object.assign(q,{__name:"DropChance"});function v(l,e,p){let b=[];return[{key:"Spoilage",valueKey:"SpoilageValue",cardKey:"SpoilageTime"},{key:"Usage",valueKey:"UsageValue",cardKey:"UsageDurability"},{key:"Fuel",valueKey:"FuelValue",cardKey:"FuelCapacity"},{key:"Progress",valueKey:"ProgressValue",cardKey:"Progress"},{key:"Special1",valueKey:"Special1Value",cardKey:"SpecialDurability1"},{key:"Special2",valueKey:"Special2Value",cardKey:"SpecialDurability2"},{key:"Special3",valueKey:"Special3Value",cardKey:"SpecialDurability3"},{key:"Special4",valueKey:"Special4Value",cardKey:"SpecialDurability4"}].forEach(({key:o,valueKey:D,cardKey:m})=>{const _=l[o];if(_!==g.NoTransfer){const s=e[m],d=l[D],$=B(e,P[o],{x:d,y:d});_===g.SetValue&&$?b.push(`${$[p]}`):b.push(`${s.CardStatName[p]}${_===g.SetValue?"="+d:""}`)}}),b.length>0?`(⤷${b.join(", ")})`:""}const J={key:0},X={key:1,class:""},Y={key:0,class:""},Z={key:0,class:"text-durability text-smaller"},ee={key:0,class:"text-durability text-smaller"},te={class:"text-sm text-balance"},ae={class:"text-sm text-balance"},ne={class:"text-durability"},re=T({__name:"CardDrop",props:{obj:{},card:{},self:{}},setup(l){return(e,p)=>{const b=h,r=k;return e.obj.DroppedCard?(a(),n("div",X,[e.obj.DropChance.Active?(a(),M(z,{key:1,dropChance:e.obj.DropChance,card:e.card},{default:O(()=>[u(b,{obj:e.obj.DroppedCard},null,8,["obj"]),u(C,{obj:e.obj.Quantity,sign:!0},null,8,["obj"]),e.card?(a(),n("span",ee,t(i(v)(e.obj.TransferRules,e.card,e.$i18n.locale)),1)):S("",!0)]),_:1},8,["dropChance","card"])):(a(),n("div",Y,[u(b,{obj:i(F)(e.obj.DroppedCard,e.obj.TransferRules)},null,8,["obj"]),u(C,{obj:e.obj.Quantity,sign:!0},null,8,["obj"]),e.card?(a(),n("span",Z,t(i(v)(e.obj.TransferRules,e.card,e.$i18n.locale)),1)):S("",!0)])),(a(!0),n(j,null,f(e.obj.DropsStatMultipliers,o=>(a(),n("div",te,[c(" ▫️"+t(e.$t("当"))+" ",1),u(b,{obj:o.InputStat},null,8,["obj"]),c(" "+t(e.$t("为"))+" ",1),u(r,{obj:o.Value,joiner:e.$t("时数量x"),outputSign:!1},null,8,["obj","joiner"])]))),256)),(a(!0),n(j,null,f(e.obj.DropsDurabilityMultipliers,o=>(a(),n("div",ae,[c(" ▫️"+t(e.$t("当"))+" ",1),y("span",ne,t(i(V)(o.InputDurability,e.self).CardStatName.Text),1),c(" "+t(e.$t("为"))+" ",1),u(r,{obj:o.Value,joiner:e.$t("时数量x"),outputSign:!1},null,8,["obj","joiner"])]))),256))])):(a(),n("span",J,t(e.$t("无")),1))}}}),de=Object.assign(re,{__name:"CardDrop"});export{de as _,V as a,z as b,v as g};
